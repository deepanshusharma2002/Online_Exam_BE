generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id         Int      @id @default(autoincrement())
  name       String
  email      String   @unique
  role       String
  password   String
  status     Int      @default(1)
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  created_by Int?
  updated_by Int?
}

model Naukari {
  naukari_id         Int                 @id @default(autoincrement())
  title              String
  subject            String
  class              Int
  description        String
  status             Int                 @default(1)
  createdAt          DateTime            @default(now())
  updatedAt          DateTime            @updatedAt
  created_by         Int?
  updated_by         Int?
  slug               String
  importantQuesAns   ImportantQuesAns[]

  @@map("naukari")
}

model ImportantQuesAns {
  id         Int     @id @default(autoincrement())
  question   String
  answer     String
  naukari_id Int
  naukari    Naukari @relation(fields: [naukari_id], references: [naukari_id], onDelete: Cascade)

  @@map("important_ques_ans")
}

model Section {
  section_id         Int       @id @default(autoincrement())
  display_name       String
  img_url            String
  url                String
  status             Int       @default(1)
  createdAt          DateTime  @default(now())
  updatedAt          DateTime  @updatedAt
  created_by         Int?
  updated_by         Int?
  seo_description    String?
  seo_keywords       String?
  seo_published_date DateTime?
  seo_title          String?

  @@map("section_master")
}

model GovernmentLinks {
  government_links_id Int      @id @default(autoincrement())
  title               String
  department          String
  location            String
  posts               Int
  last_date           DateTime
  status              Int      @default(1)
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt
  created_by          Int?
  updated_by          Int?
  url                 String

  @@map("government_links")
}

model homeText {
  home_text_id       Int      @id @default(autoincrement())
  heading1           String
  heading2           String
  seo_title          String
  seo_keywords       String
  seo_published_date DateTime
  seo_description    String
  status             Int      @default(1)
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt
  created_by         Int?
  updated_by         Int?

  @@map("home_text")
}

model ContactUs {
  contact_us_id Int    @id @default(autoincrement())
  name          String
  subject       String
  email         String
  message       String

  @@map("contact_us")
}

model Student {
  student_id  Int          @id @default(autoincrement())
  name        String
  email       String       @unique
  mobile      String
  age         Int
  gender      Gender
  class       String?
  is_verified Boolean      @default(false)
  status      Int
  created_at  DateTime     @default(now())
  updated_at  DateTime     @updatedAt
  password    String

  otps        StudentOTP[]
  exams       student_exam[]
}

model StudentOTP {
  otp_id     Int      @id @default(autoincrement())
  student_id Int
  otp_code   String
  expires_at DateTime
  is_used    Boolean  @default(false)
  created_at DateTime @default(now())
  student    Student  @relation(fields: [student_id], references: [student_id])
}

model student_ques_ans {
  student_ques_ans_id Int      @id @default(autoincrement())
  question            String
  option_a            String
  option_b            String
  option_c            String
  option_d            String
  ans_option          String
  status              Int      @default(1)
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt
  created_by          Int?
  updated_by          Int?

  exam_schedule_id    Int

  exam_schedule exam_schedule @relation(fields: [exam_schedule_id], references: [exam_schedule_id], onDelete: Cascade)
  
  examAnswers student_exam_answers[]
}

model student_exam {
  exam_id    Int       @id @default(autoincrement())
  student_id Int
  total_q    Int
  start_time DateTime  @default(now())
  end_time   DateTime?
  fatal       Int?
  exam_schedule_id   Int
  status     Int       @default(1)
  score      Int?

  exam_schedule exam_schedule    @relation(fields: [exam_schedule_id], references: [exam_schedule_id], onDelete: Cascade)

  student       Student       @relation(fields: [student_id], references: [student_id], onDelete: Cascade)

}

model student_exam_answers {
  id          Int      @id @default(autoincrement())
  exam_id     Int
  question_id Int
  selected    String?
  is_correct  Boolean?

  question student_ques_ans   @relation(fields: [question_id], references: [student_ques_ans_id])
}

  model exam_schedule {
    exam_schedule_id Int      @id @default(autoincrement())

    exam_name        String

    start_date       DateTime
    start_time       String
    end_date         DateTime
    end_time         String
    total_q          Int?
    exam_time_min    Int
    class            Int
    subject          String

    status           Int      @default(1)
    
    questions student_ques_ans[]
    studentExams student_exam[]
  }


enum Gender {
  MALE
  FEMALE
  OTHER
}

model Plan {
  plan_id           Int @id @default(autoincrement())
  plan_code         String    @db.VarChar(50)
  plan_name         String    @db.VarChar(150)
  description       String?   @db.Text

  plan_type         PlanType

  is_duration_value_available Boolean  @default(false)
  duration_value    Int?
  duration_unit     DurationUnit?

  price             Decimal   @db.Decimal(10, 2)
  discount_price    Decimal?  @db.Decimal(10, 2)
  tax_percentage    Decimal?  @db.Decimal(5, 2)

  features          Json?

  is_trial_available Boolean  @default(false)
  trial_days        Int?

  status            Int       @default(1)

  created_at        DateTime  @default(now())
  updated_at        DateTime  @updatedAt
  created_by        Int?
  updated_by        Int?

  @@map("plans")
}

model PlanInterested {
  plan_interested_id Int      @id @default(autoincrement())
  plan_id            Int

  name               String
  email              String?
  phone              String
  message            String?  @db.Text

  created_at         DateTime @default(now())

  @@map("plan_interested")
}


enum PlanType {
  monthly
  quarterly
  half_yearly
  yearly
}

enum DurationUnit {
  days
  months
  years
}

